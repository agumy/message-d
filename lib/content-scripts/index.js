(()=>{var e={905:function(e,r,t){"use strict";var n=this&&this.__awaiter||function(e,r,t,n){return new(t||(t=Promise))((function(s,o){function i(e){try{l(n.next(e))}catch(e){o(e)}}function a(e){try{l(n.throw(e))}catch(e){o(e)}}function l(e){var r;e.done?s(e.value):(r=e.value,r instanceof t?r:new t((function(e){e(r)}))).then(i,a)}l((n=n.apply(e,r||[])).next())}))},s=this&&this.__generator||function(e,r){var t,n,s,o,i={label:0,sent:function(){if(1&s[0])throw s[1];return s[1]},trys:[],ops:[]};return o={next:a(0),throw:a(1),return:a(2)},"function"==typeof Symbol&&(o[Symbol.iterator]=function(){return this}),o;function a(o){return function(a){return function(o){if(t)throw new TypeError("Generator is already executing.");for(;i;)try{if(t=1,n&&(s=2&o[0]?n.return:o[0]?n.throw||((s=n.return)&&s.call(n),0):n.next)&&!(s=s.call(n,o[1])).done)return s;switch(n=0,s&&(o=[2&o[0],s.value]),o[0]){case 0:case 1:s=o;break;case 4:return i.label++,{value:o[1],done:!1};case 5:i.label++,n=o[1],o=[0];continue;case 7:o=i.ops.pop(),i.trys.pop();continue;default:if(!((s=(s=i.trys).length>0&&s[s.length-1])||6!==o[0]&&2!==o[0])){i=0;continue}if(3===o[0]&&(!s||o[1]>s[0]&&o[1]<s[3])){i.label=o[1];break}if(6===o[0]&&i.label<s[1]){i.label=s[1],s=o;break}if(s&&i.label<s[2]){i.label=s[2],i.ops.push(o);break}s[2]&&i.ops.pop(),i.trys.pop();continue}o=r.call(e,i)}catch(e){o=[6,e],n=0}finally{t=s=0}if(5&o[0])throw o[1];return{value:o[0]?o[1]:void 0,done:!0}}([o,a])}}};Object.defineProperty(r,"__esModule",{value:!0}),r.getAllTextNode=r.getAllTextNodeConsideringSelector=void 0;var o=t(161),i=["TITLE","SCRIPT","STYLE","TEXTAREA","SVG","CODE","PRE"],a=["BR","KBD","WBR"],l=function(e){return!!e.childNodes.length&&Array.from(e.childNodes).every((function(e){return 3===e.nodeType||l(e)||a.includes(e.nodeName.toUpperCase())}))};r.getAllTextNodeConsideringSelector=function(e){return void 0===e&&(e=document.body),n(void 0,void 0,void 0,(function(){var r,t,n,a,c;return s(this,(function(s){switch(s.label){case 0:return r=[],[4,o.getSelectorStorage()];case 1:return t=s.sent().selectors,n=t.join(","),a=Array.from(e.querySelectorAll(n)),[2,(c=function(e){if(function(e){var r;return 3===e.nodeType&&(null!==(r=e.textContent)&&void 0!==r?r:"").trim().length>0||!!e.childNodes.length&&!!(l(e)&&e.innerHTML.length<=5e3)}(e))r.push(e);else for(var t=function(e){i.includes(e.nodeName.toUpperCase())||a.some((function(r){return r.isEqualNode(e)}))||c(e)},n=0,s=Array.from(e.childNodes);n<s.length;n++)t(s[n]);return r})(e)]}}))}))},r.getAllTextNode=function(e){return void 0===e&&(e=document.body),n(void 0,void 0,void 0,(function(){var r,t,n,a,l;return s(this,(function(s){switch(s.label){case 0:return r=[],[4,o.getSelectorStorage()];case 1:return t=s.sent().selectors,n=t.join(","),a=Array.from(e.querySelectorAll(n)),[2,(l=function(e){if(o=e,Array.from(o.childNodes).some((function(e){var r;return 3===e.nodeType&&(null!==(r=e.textContent)&&void 0!==r?r:"").trim().length>0})))r.push(e);else for(var t=function(e){i.includes(e.nodeName.toUpperCase())||a.some((function(r){return r.isEqualNode(e)}))||l(e)},n=0,s=Array.from(e.childNodes);n<s.length;n++)t(s[n]);var o;return r})(e)]}}))}))}},217:function(e,r,t){"use strict";var n=this&&this.__assign||function(){return(n=Object.assign||function(e){for(var r,t=1,n=arguments.length;t<n;t++)for(var s in r=arguments[t])Object.prototype.hasOwnProperty.call(r,s)&&(e[s]=r[s]);return e}).apply(this,arguments)},s=this&&this.__awaiter||function(e,r,t,n){return new(t||(t=Promise))((function(s,o){function i(e){try{l(n.next(e))}catch(e){o(e)}}function a(e){try{l(n.throw(e))}catch(e){o(e)}}function l(e){var r;e.done?s(e.value):(r=e.value,r instanceof t?r:new t((function(e){e(r)}))).then(i,a)}l((n=n.apply(e,r||[])).next())}))},o=this&&this.__generator||function(e,r){var t,n,s,o,i={label:0,sent:function(){if(1&s[0])throw s[1];return s[1]},trys:[],ops:[]};return o={next:a(0),throw:a(1),return:a(2)},"function"==typeof Symbol&&(o[Symbol.iterator]=function(){return this}),o;function a(o){return function(a){return function(o){if(t)throw new TypeError("Generator is already executing.");for(;i;)try{if(t=1,n&&(s=2&o[0]?n.return:o[0]?n.throw||((s=n.return)&&s.call(n),0):n.next)&&!(s=s.call(n,o[1])).done)return s;switch(n=0,s&&(o=[2&o[0],s.value]),o[0]){case 0:case 1:s=o;break;case 4:return i.label++,{value:o[1],done:!1};case 5:i.label++,n=o[1],o=[0];continue;case 7:o=i.ops.pop(),i.trys.pop();continue;default:if(!((s=(s=i.trys).length>0&&s[s.length-1])||6!==o[0]&&2!==o[0])){i=0;continue}if(3===o[0]&&(!s||o[1]>s[0]&&o[1]<s[3])){i.label=o[1];break}if(6===o[0]&&i.label<s[1]){i.label=s[1],s=o;break}if(s&&i.label<s[2]){i.label=s[2],i.ops.push(o);break}s[2]&&i.ops.pop(),i.trys.pop();continue}o=r.call(e,i)}catch(e){o=[6,e],n=0}finally{t=s=0}if(5&o[0])throw o[1];return{value:o[0]?o[1]:void 0,done:!0}}([o,a])}}};Object.defineProperty(r,"__esModule",{value:!0});var i=t(416),a=t(752),l=t(550),c=t(636),u=t(379),m=t(455),g=t(158),d=t(117),A=t(513),f=t(863),v=t(761),p=t(611),h=t(955),b=t(905),y=[],x=[],w=[],k=!1,_=function(e){return s(void 0,void 0,Promise,(function(){var r,t,n,u;return o(this,(function(m){switch(m.label){case 0:return"c"===e.key&&e.ctrlKey?[4,v.get()]:[2];case 1:return"browser"!==m.sent()||(r=null,t=function(e){var t=e.clientX,n=e.clientY,s=document.elementFromPoint(t,n);(null==r?void 0:r.isEqualNode(s))||(null==r||r.classList.remove("message-d__translator"),null==s||s.classList.add("message-d__translator"),r=s)},n=function(e){return s(void 0,void 0,Promise,(function(){var t,n,s,u,m,d,v;return o(this,(function(o){switch(o.label){case 0:return e.stopImmediatePropagation(),e.stopPropagation(),e.preventDefault(),(t=document.elementFromPoint(e.clientX,e.clientY))?(null==r||r.classList.remove("message-d__translator"),n=a.createLoadingElement(),document.querySelector("#message-d__loader-id")||document.body.appendChild(n),s=l.generateElementFromString(t.innerHTML),A.sanitizeTranslatedHTML(s),u=c.getAllAtrributeRecursively(s),g.removeAllAttributesRecursively(s),m=s.innerHTML,d=m.replaceAll(/\. /g,"$&\n"),[4,f.sha256(d)]):[2];case 1:return v=o.sent(),y.push({original:d,translationKey:v,dom:t,attribute:u}),h.waitAsync((function(){return!k}),(function(){var e,r;k=!0,i.browser.runtime.sendMessage({key:"requestTranslation",value:null===(e=y[0])||void 0===e?void 0:e.original,translationKey:null===(r=y[0])||void 0===r?void 0:r.translationKey})})),[2]}}))}))},u=function(e){("Escape"===e.key||"c"===e.key&&e.ctrlKey)&&(document.removeEventListener("mousemove",t),document.removeEventListener("click",n,!0),document.removeEventListener("keydown",u),document.addEventListener("keydown",_),document.querySelectorAll(".message-d__translator").forEach((function(e){e.classList.remove("message-d__translator")})))},document.addEventListener("mousemove",t),document.addEventListener("click",n,!0),document.addEventListener("keydown",u),document.removeEventListener("keydown",_)),[2]}}))}))},T=function(e){return s(void 0,void 0,Promise,(function(){var r,t,n,d;return o(this,(function(p){switch(p.label){case 0:return"q"===e.key&&e.ctrlKey?[4,v.get()]:[2];case 1:return"browser"!==p.sent()||(r=null,t=function(e){var t=e.clientX,n=e.clientY,s=document.elementFromPoint(t,n);(null==r?void 0:r.isEqualNode(s))||(null==r||r.classList.remove("message-d__translator"),null==s||s.classList.add("message-d__translator"),r=s)},n=function(e){return s(void 0,void 0,Promise,(function(){var t,n,d,v;return o(this,(function(p){switch(p.label){case 0:return e.stopImmediatePropagation(),e.stopPropagation(),e.preventDefault(),(t=document.elementFromPoint(e.clientX,e.clientY))?(null==r||r.classList.remove("message-d__translator"),[4,b.getAllTextNodeConsideringSelector(t)]):[2];case 1:return n=p.sent(),d=n.filter((function(e){var r;return null===(r=e.textContent)||void 0===r?void 0:r.trim()})).map((function(e){return{isTranslated:!1,node:e}})),(v=function(){return s(void 0,void 0,void 0,(function(){var e,r,t,n,s,p,b,x,w,_,T,E;return o(this,(function(o){switch(o.label){case 0:(e=d.filter((function(e,r){if(e.isTranslated)return!1;var t=u.getBoundingClientRectFlexibly(e.node);return t.top>=0&&t.top<=window.innerHeight&&(d[r].isTranslated=!0,!0)}))).length&&!document.querySelector("#message-d__loader-id")&&(r=a.createLoadingElement(),document.body.appendChild(r)),(t=e.map((function(e){return l.generateElementFromString(m.getInnerHTMLFlexibly(e.node))}))).forEach(A.sanitizeTranslatedHTML),n=t.map(c.getAllAtrributeRecursively),t.forEach(g.removeAllAttributesRecursively),s=0,p=Object.entries(t),o.label=1;case 1:return s<p.length?(b=p[s],x=b[0],w=b[1],_=m.getInnerHTMLFlexibly(w),T=_.replaceAll(/\. /g,"$&\n"),[4,f.sha256(T)]):[3,4];case 2:E=o.sent(),y.push({original:T,translationKey:E,dom:e[Number(x)].node,attribute:n[Number(x)]}),h.waitAsync((function(){return!k}),(function(){y[0]&&(k=!0,i.browser.runtime.sendMessage({key:"requestTranslation",value:y[0].original,translationKey:y[0].translationKey}))})),o.label=3;case 3:return s++,[3,1];case 4:return setTimeout(v,2e3),[2]}}))}))})(),[2]}}))}))},d=function(e){("Escape"===e.key||"q"===e.key&&e.ctrlKey)&&(document.removeEventListener("mousemove",t),document.removeEventListener("click",n,!0),document.removeEventListener("keydown",d),document.addEventListener("keydown",T),document.querySelectorAll(".message-d__translator").forEach((function(e){e.classList.remove("message-d__translator")})))},document.addEventListener("mousemove",t),document.addEventListener("click",n,!0),document.addEventListener("keydown",d),document.removeEventListener("keydown",T)),[2]}}))}))};!function(){s(this,void 0,void 0,(function(){return o(this,(function(e){return document.addEventListener("keydown",_),document.addEventListener("keydown",T),[2]}))}))}(),i.browser.runtime.onMessage.addListener((function(e){if("completedTranslation"===e.key){var r=y.find((function(r){return r.translationKey===e.translationKey}));if(r&&e.value.trim()){w=[],x.push({dom:r.dom,content:m.getInnerHTMLFlexibly(r.dom)});var t=p.unescapeHTML(e.value),n=l.generateElementFromString(t);A.sanitizeTranslatedHTML(n),d.restoreAttributesRecursively(n,r.attribute),r.dom instanceof Element?r.dom.innerHTML=n.innerHTML:r.dom.textContent=n.textContent}if(y=y.filter((function(e){return e.translationKey!==(null==r?void 0:r.translationKey)})),k=!1,!y.length){var s=document.querySelector("#message-d__loader-id");s&&document.body.removeChild(s)}}})),document.addEventListener("keydown",(function(e){if("z"===e.key&&e.ctrlKey){var r=x.pop();r&&(w.push(n(n({},r),{content:m.getInnerHTMLFlexibly(r.dom)})),r.dom instanceof Element?r.dom.innerHTML=""+p.unescapeHTML(r.content):r.dom.textContent=""+p.unescapeHTML(r.content))}})),document.addEventListener("keydown",(function(e){if("Z"===e.key&&e.ctrlKey&&e.shiftKey){var r=w.pop();r&&(x.push(n(n({},r),{content:m.getInnerHTMLFlexibly(r.dom)})),r.dom instanceof Element?r.dom.innerHTML=""+p.unescapeHTML(r.content):r.dom.textContent=""+p.unescapeHTML(r.content))}}))},752:(e,r)=>{"use strict";Object.defineProperty(r,"__esModule",{value:!0}),r.createLoadingElement=void 0,r.createLoadingElement=function(){var e=document.createElement("div");return e.classList.add("message-d__loader"),e.id="message-d__loader-id",e}},550:(e,r)=>{"use strict";Object.defineProperty(r,"__esModule",{value:!0}),r.generateElementFromString=void 0,r.generateElementFromString=function(e){var r=document.createElement("div");return r.innerHTML=e,r}},636:function(e,r){"use strict";var t=this&&this.__assign||function(){return(t=Object.assign||function(e){for(var r,t=1,n=arguments.length;t<n;t++)for(var s in r=arguments[t])Object.prototype.hasOwnProperty.call(r,s)&&(e[s]=r[s]);return e}).apply(this,arguments)};Object.defineProperty(r,"__esModule",{value:!0}),r.getAllAtrributeRecursively=void 0,r.getAllAtrributeRecursively=function(e){var r=[],n=function(e){if(e instanceof Element){if(e.hasAttributes()){var s=Array.from(e.attributes).reduce((function(e,r){var n;return t(t({},e),((n={})[r.name]=r.value,n))}),{});r.push(s)}for(var o=0,i=Array.from(e.childNodes);o<i.length;o++){var a=i[o];n(a)}}};return n(e),r}},379:(e,r)=>{"use strict";Object.defineProperty(r,"__esModule",{value:!0}),r.getBoundingClientRectFlexibly=void 0,r.getBoundingClientRectFlexibly=function(e){if(e instanceof Element)return e.getBoundingClientRect();var r=document.createRange();return r.selectNode(e),r.getBoundingClientRect()}},455:(e,r)=>{"use strict";Object.defineProperty(r,"__esModule",{value:!0}),r.getInnerHTMLFlexibly=void 0,r.getInnerHTMLFlexibly=function(e){return e instanceof Element?e.innerHTML:e.textContent}},158:(e,r)=>{"use strict";Object.defineProperty(r,"__esModule",{value:!0}),r.removeAllAttributesRecursively=void 0,r.removeAllAttributesRecursively=function(e){var r=0,t=function(e){if(e instanceof Element){e.hasAttribute("class")&&""===e.getAttribute("class")&&e.removeAttribute("class");for(var n=e.hasAttributes();e.hasAttributes();)for(var s=0,o=Array.from(e.attributes);s<o.length;s++){var i=o[s];e.removeAttribute(i.name)}n&&e.setAttribute("i",String(r++));for(var a=0,l=Array.from(e.children);a<l.length;a++){var c=l[a];t(c)}}};t(e)}},117:(e,r)=>{"use strict";Object.defineProperty(r,"__esModule",{value:!0}),r.restoreAttributesRecursively=void 0,r.restoreAttributesRecursively=function(e,t){if(e instanceof Element){if(e.hasAttribute("i")){var n=t[Number(e.getAttribute("i"))];if(n)for(var s=0,o=Object.entries(n);s<o.length;s++){var i=o[s],a=i[0],l=i[1];e.setAttribute(a,l)}e.removeAttribute("i")}for(var c=0,u=Array.from(e.childNodes);c<u.length;c++){var m=u[c];r.restoreAttributesRecursively(m,t)}}}},513:(e,r)=>{"use strict";Object.defineProperty(r,"__esModule",{value:!0}),r.sanitizeTranslatedHTML=void 0,r.sanitizeTranslatedHTML=function(e){var t,n;e instanceof Text&&("。"===(null===(t=e.nodeValue)||void 0===t?void 0:t.trim())||!(null===(n=e.nodeValue)||void 0===n?void 0:n.trim().length))&&e.remove();for(var s=0,o=Array.from(e.childNodes);s<o.length;s++){var i=o[s];r.sanitizeTranslatedHTML(i)}}},863:function(e,r){"use strict";var t=this&&this.__awaiter||function(e,r,t,n){return new(t||(t=Promise))((function(s,o){function i(e){try{l(n.next(e))}catch(e){o(e)}}function a(e){try{l(n.throw(e))}catch(e){o(e)}}function l(e){var r;e.done?s(e.value):(r=e.value,r instanceof t?r:new t((function(e){e(r)}))).then(i,a)}l((n=n.apply(e,r||[])).next())}))},n=this&&this.__generator||function(e,r){var t,n,s,o,i={label:0,sent:function(){if(1&s[0])throw s[1];return s[1]},trys:[],ops:[]};return o={next:a(0),throw:a(1),return:a(2)},"function"==typeof Symbol&&(o[Symbol.iterator]=function(){return this}),o;function a(o){return function(a){return function(o){if(t)throw new TypeError("Generator is already executing.");for(;i;)try{if(t=1,n&&(s=2&o[0]?n.return:o[0]?n.throw||((s=n.return)&&s.call(n),0):n.next)&&!(s=s.call(n,o[1])).done)return s;switch(n=0,s&&(o=[2&o[0],s.value]),o[0]){case 0:case 1:s=o;break;case 4:return i.label++,{value:o[1],done:!1};case 5:i.label++,n=o[1],o=[0];continue;case 7:o=i.ops.pop(),i.trys.pop();continue;default:if(!((s=(s=i.trys).length>0&&s[s.length-1])||6!==o[0]&&2!==o[0])){i=0;continue}if(3===o[0]&&(!s||o[1]>s[0]&&o[1]<s[3])){i.label=o[1];break}if(6===o[0]&&i.label<s[1]){i.label=s[1],s=o;break}if(s&&i.label<s[2]){i.label=s[2],i.ops.push(o);break}s[2]&&i.ops.pop(),i.trys.pop();continue}o=r.call(e,i)}catch(e){o=[6,e],n=0}finally{t=s=0}if(5&o[0])throw o[1];return{value:o[0]?o[1]:void 0,done:!0}}([o,a])}}};Object.defineProperty(r,"__esModule",{value:!0}),r.sha256=void 0,r.sha256=function(e){return t(void 0,void 0,void 0,(function(){var r,t;return n(this,(function(n){switch(n.label){case 0:return r=(new TextEncoder).encode(e),[4,crypto.subtle.digest("SHA-256",r)];case 1:return t=n.sent(),[2,Array.from(new Uint8Array(t)).map((function(e){return e.toString(16).padStart(2,"0")})).join("")]}}))}))}},761:function(e,r,t){"use strict";var n=this&&this.__awaiter||function(e,r,t,n){return new(t||(t=Promise))((function(s,o){function i(e){try{l(n.next(e))}catch(e){o(e)}}function a(e){try{l(n.throw(e))}catch(e){o(e)}}function l(e){var r;e.done?s(e.value):(r=e.value,r instanceof t?r:new t((function(e){e(r)}))).then(i,a)}l((n=n.apply(e,r||[])).next())}))},s=this&&this.__generator||function(e,r){var t,n,s,o,i={label:0,sent:function(){if(1&s[0])throw s[1];return s[1]},trys:[],ops:[]};return o={next:a(0),throw:a(1),return:a(2)},"function"==typeof Symbol&&(o[Symbol.iterator]=function(){return this}),o;function a(o){return function(a){return function(o){if(t)throw new TypeError("Generator is already executing.");for(;i;)try{if(t=1,n&&(s=2&o[0]?n.return:o[0]?n.throw||((s=n.return)&&s.call(n),0):n.next)&&!(s=s.call(n,o[1])).done)return s;switch(n=0,s&&(o=[2&o[0],s.value]),o[0]){case 0:case 1:s=o;break;case 4:return i.label++,{value:o[1],done:!1};case 5:i.label++,n=o[1],o=[0];continue;case 7:o=i.ops.pop(),i.trys.pop();continue;default:if(!((s=(s=i.trys).length>0&&s[s.length-1])||6!==o[0]&&2!==o[0])){i=0;continue}if(3===o[0]&&(!s||o[1]>s[0]&&o[1]<s[3])){i.label=o[1];break}if(6===o[0]&&i.label<s[1]){i.label=s[1],s=o;break}if(s&&i.label<s[2]){i.label=s[2],i.ops.push(o);break}s[2]&&i.ops.pop(),i.trys.pop();continue}o=r.call(e,i)}catch(e){o=[6,e],n=0}finally{t=s=0}if(5&o[0])throw o[1];return{value:o[0]?o[1]:void 0,done:!0}}([o,a])}}};Object.defineProperty(r,"__esModule",{value:!0}),r.set=r.get=void 0;var o=t(416);r.get=function(){return n(void 0,void 0,Promise,(function(){var e;return s(this,(function(r){switch(r.label){case 0:return[4,o.browser.storage.sync.get("mode")];case 1:return(e=r.sent().mode)?[2,e]:[2,"browser"]}}))}))},r.set=function(e){return n(void 0,void 0,Promise,(function(){return s(this,(function(r){switch(r.label){case 0:return[4,o.browser.storage.sync.set({mode:e})];case 1:return r.sent(),[2]}}))}))}},161:function(e,r,t){"use strict";var n=this&&this.__awaiter||function(e,r,t,n){return new(t||(t=Promise))((function(s,o){function i(e){try{l(n.next(e))}catch(e){o(e)}}function a(e){try{l(n.throw(e))}catch(e){o(e)}}function l(e){var r;e.done?s(e.value):(r=e.value,r instanceof t?r:new t((function(e){e(r)}))).then(i,a)}l((n=n.apply(e,r||[])).next())}))},s=this&&this.__generator||function(e,r){var t,n,s,o,i={label:0,sent:function(){if(1&s[0])throw s[1];return s[1]},trys:[],ops:[]};return o={next:a(0),throw:a(1),return:a(2)},"function"==typeof Symbol&&(o[Symbol.iterator]=function(){return this}),o;function a(o){return function(a){return function(o){if(t)throw new TypeError("Generator is already executing.");for(;i;)try{if(t=1,n&&(s=2&o[0]?n.return:o[0]?n.throw||((s=n.return)&&s.call(n),0):n.next)&&!(s=s.call(n,o[1])).done)return s;switch(n=0,s&&(o=[2&o[0],s.value]),o[0]){case 0:case 1:s=o;break;case 4:return i.label++,{value:o[1],done:!1};case 5:i.label++,n=o[1],o=[0];continue;case 7:o=i.ops.pop(),i.trys.pop();continue;default:if(!((s=(s=i.trys).length>0&&s[s.length-1])||6!==o[0]&&2!==o[0])){i=0;continue}if(3===o[0]&&(!s||o[1]>s[0]&&o[1]<s[3])){i.label=o[1];break}if(6===o[0]&&i.label<s[1]){i.label=s[1],s=o;break}if(s&&i.label<s[2]){i.label=s[2],i.ops.push(o);break}s[2]&&i.ops.pop(),i.trys.pop();continue}o=r.call(e,i)}catch(e){o=[6,e],n=0}finally{t=s=0}if(5&o[0])throw o[1];return{value:o[0]?o[1]:void 0,done:!0}}([o,a])}}},o=this&&this.__spreadArray||function(e,r){for(var t=0,n=r.length,s=e.length;t<n;t++,s++)e[s]=r[t];return e};Object.defineProperty(r,"__esModule",{value:!0}),r.removeFromStorage=r.setToStorage=r.getSelectorStorage=void 0;var i=t(416);r.getSelectorStorage=function(){return n(void 0,void 0,void 0,(function(){var e;return s(this,(function(r){switch(r.label){case 0:return[4,i.browser.storage.sync.get("selectors")];case 1:return[2,null!==(e=r.sent())&&void 0!==e?e:{selectors:[]}]}}))}))},r.setToStorage=function(e){return n(void 0,void 0,void 0,(function(){var t;return s(this,(function(n){switch(n.label){case 0:return[4,r.getSelectorStorage()];case 1:return t=n.sent(),[4,i.browser.storage.sync.set({selectors:Array.from(new Set(o(o([],t.selectors),[e])))})];case 2:return n.sent(),Promise.resolve(),[2]}}))}))},r.removeFromStorage=function(e){return n(void 0,void 0,void 0,(function(){var t;return s(this,(function(n){switch(n.label){case 0:return[4,r.getSelectorStorage()];case 1:return t=n.sent(),[4,i.browser.storage.sync.set({selectors:o([],t.selectors).filter((function(r){return r!==e}))})];case 2:return n.sent(),[2]}}))}))}},611:(e,r)=>{"use strict";Object.defineProperty(r,"__esModule",{value:!0}),r.unescapeHTML=void 0,r.unescapeHTML=function(e){var r={"&lt;":"<","&gt;":">","&amp;":"&","&quot;":'"',"&#x27;":"'","&#x60;":"`"};return e.replace(/&(lt|gt|amp|quot|#x27|#x60);/g,(function(e){var t;return null!==(t=r[e])&&void 0!==t?t:""}))}},955:(e,r)=>{"use strict";Object.defineProperty(r,"__esModule",{value:!0}),r.waitAsync=void 0,r.waitAsync=function(e,r,t){if(void 0===t&&(t=100),e())r();else var n=setInterval((function(){e()&&(clearInterval(n),r())}),t)}},416:(e,r,t)=>{"use strict";Object.defineProperty(r,"__esModule",{value:!0}),r.browser=t(150)},150:function(e,r){var t,n;"undefined"!=typeof globalThis?globalThis:"undefined"!=typeof self&&self,void 0===(n="function"==typeof(t=function(e){"use strict";if("undefined"==typeof browser||Object.getPrototypeOf(browser)!==Object.prototype){const r="The message port closed before a response was received.",t="Returning a Promise is the preferred way to send a reply from an onMessage/onMessageExternal listener, as the sendResponse will be removed from the specs (See https://developer.mozilla.org/docs/Mozilla/Add-ons/WebExtensions/API/runtime/onMessage)",n=e=>{const n={alarms:{clear:{minArgs:0,maxArgs:1},clearAll:{minArgs:0,maxArgs:0},get:{minArgs:0,maxArgs:1},getAll:{minArgs:0,maxArgs:0}},bookmarks:{create:{minArgs:1,maxArgs:1},get:{minArgs:1,maxArgs:1},getChildren:{minArgs:1,maxArgs:1},getRecent:{minArgs:1,maxArgs:1},getSubTree:{minArgs:1,maxArgs:1},getTree:{minArgs:0,maxArgs:0},move:{minArgs:2,maxArgs:2},remove:{minArgs:1,maxArgs:1},removeTree:{minArgs:1,maxArgs:1},search:{minArgs:1,maxArgs:1},update:{minArgs:2,maxArgs:2}},browserAction:{disable:{minArgs:0,maxArgs:1,fallbackToNoCallback:!0},enable:{minArgs:0,maxArgs:1,fallbackToNoCallback:!0},getBadgeBackgroundColor:{minArgs:1,maxArgs:1},getBadgeText:{minArgs:1,maxArgs:1},getPopup:{minArgs:1,maxArgs:1},getTitle:{minArgs:1,maxArgs:1},openPopup:{minArgs:0,maxArgs:0},setBadgeBackgroundColor:{minArgs:1,maxArgs:1,fallbackToNoCallback:!0},setBadgeText:{minArgs:1,maxArgs:1,fallbackToNoCallback:!0},setIcon:{minArgs:1,maxArgs:1},setPopup:{minArgs:1,maxArgs:1,fallbackToNoCallback:!0},setTitle:{minArgs:1,maxArgs:1,fallbackToNoCallback:!0}},browsingData:{remove:{minArgs:2,maxArgs:2},removeCache:{minArgs:1,maxArgs:1},removeCookies:{minArgs:1,maxArgs:1},removeDownloads:{minArgs:1,maxArgs:1},removeFormData:{minArgs:1,maxArgs:1},removeHistory:{minArgs:1,maxArgs:1},removeLocalStorage:{minArgs:1,maxArgs:1},removePasswords:{minArgs:1,maxArgs:1},removePluginData:{minArgs:1,maxArgs:1},settings:{minArgs:0,maxArgs:0}},commands:{getAll:{minArgs:0,maxArgs:0}},contextMenus:{remove:{minArgs:1,maxArgs:1},removeAll:{minArgs:0,maxArgs:0},update:{minArgs:2,maxArgs:2}},cookies:{get:{minArgs:1,maxArgs:1},getAll:{minArgs:1,maxArgs:1},getAllCookieStores:{minArgs:0,maxArgs:0},remove:{minArgs:1,maxArgs:1},set:{minArgs:1,maxArgs:1}},devtools:{inspectedWindow:{eval:{minArgs:1,maxArgs:2,singleCallbackArg:!1}},panels:{create:{minArgs:3,maxArgs:3,singleCallbackArg:!0},elements:{createSidebarPane:{minArgs:1,maxArgs:1}}}},downloads:{cancel:{minArgs:1,maxArgs:1},download:{minArgs:1,maxArgs:1},erase:{minArgs:1,maxArgs:1},getFileIcon:{minArgs:1,maxArgs:2},open:{minArgs:1,maxArgs:1,fallbackToNoCallback:!0},pause:{minArgs:1,maxArgs:1},removeFile:{minArgs:1,maxArgs:1},resume:{minArgs:1,maxArgs:1},search:{minArgs:1,maxArgs:1},show:{minArgs:1,maxArgs:1,fallbackToNoCallback:!0}},extension:{isAllowedFileSchemeAccess:{minArgs:0,maxArgs:0},isAllowedIncognitoAccess:{minArgs:0,maxArgs:0}},history:{addUrl:{minArgs:1,maxArgs:1},deleteAll:{minArgs:0,maxArgs:0},deleteRange:{minArgs:1,maxArgs:1},deleteUrl:{minArgs:1,maxArgs:1},getVisits:{minArgs:1,maxArgs:1},search:{minArgs:1,maxArgs:1}},i18n:{detectLanguage:{minArgs:1,maxArgs:1},getAcceptLanguages:{minArgs:0,maxArgs:0}},identity:{launchWebAuthFlow:{minArgs:1,maxArgs:1}},idle:{queryState:{minArgs:1,maxArgs:1}},management:{get:{minArgs:1,maxArgs:1},getAll:{minArgs:0,maxArgs:0},getSelf:{minArgs:0,maxArgs:0},setEnabled:{minArgs:2,maxArgs:2},uninstallSelf:{minArgs:0,maxArgs:1}},notifications:{clear:{minArgs:1,maxArgs:1},create:{minArgs:1,maxArgs:2},getAll:{minArgs:0,maxArgs:0},getPermissionLevel:{minArgs:0,maxArgs:0},update:{minArgs:2,maxArgs:2}},pageAction:{getPopup:{minArgs:1,maxArgs:1},getTitle:{minArgs:1,maxArgs:1},hide:{minArgs:1,maxArgs:1,fallbackToNoCallback:!0},setIcon:{minArgs:1,maxArgs:1},setPopup:{minArgs:1,maxArgs:1,fallbackToNoCallback:!0},setTitle:{minArgs:1,maxArgs:1,fallbackToNoCallback:!0},show:{minArgs:1,maxArgs:1,fallbackToNoCallback:!0}},permissions:{contains:{minArgs:1,maxArgs:1},getAll:{minArgs:0,maxArgs:0},remove:{minArgs:1,maxArgs:1},request:{minArgs:1,maxArgs:1}},runtime:{getBackgroundPage:{minArgs:0,maxArgs:0},getPlatformInfo:{minArgs:0,maxArgs:0},openOptionsPage:{minArgs:0,maxArgs:0},requestUpdateCheck:{minArgs:0,maxArgs:0},sendMessage:{minArgs:1,maxArgs:3},sendNativeMessage:{minArgs:2,maxArgs:2},setUninstallURL:{minArgs:1,maxArgs:1}},sessions:{getDevices:{minArgs:0,maxArgs:1},getRecentlyClosed:{minArgs:0,maxArgs:1},restore:{minArgs:0,maxArgs:1}},storage:{local:{clear:{minArgs:0,maxArgs:0},get:{minArgs:0,maxArgs:1},getBytesInUse:{minArgs:0,maxArgs:1},remove:{minArgs:1,maxArgs:1},set:{minArgs:1,maxArgs:1}},managed:{get:{minArgs:0,maxArgs:1},getBytesInUse:{minArgs:0,maxArgs:1}},sync:{clear:{minArgs:0,maxArgs:0},get:{minArgs:0,maxArgs:1},getBytesInUse:{minArgs:0,maxArgs:1},remove:{minArgs:1,maxArgs:1},set:{minArgs:1,maxArgs:1}}},tabs:{captureVisibleTab:{minArgs:0,maxArgs:2},create:{minArgs:1,maxArgs:1},detectLanguage:{minArgs:0,maxArgs:1},discard:{minArgs:0,maxArgs:1},duplicate:{minArgs:1,maxArgs:1},executeScript:{minArgs:1,maxArgs:2},get:{minArgs:1,maxArgs:1},getCurrent:{minArgs:0,maxArgs:0},getZoom:{minArgs:0,maxArgs:1},getZoomSettings:{minArgs:0,maxArgs:1},goBack:{minArgs:0,maxArgs:1},goForward:{minArgs:0,maxArgs:1},highlight:{minArgs:1,maxArgs:1},insertCSS:{minArgs:1,maxArgs:2},move:{minArgs:2,maxArgs:2},query:{minArgs:1,maxArgs:1},reload:{minArgs:0,maxArgs:2},remove:{minArgs:1,maxArgs:1},removeCSS:{minArgs:1,maxArgs:2},sendMessage:{minArgs:2,maxArgs:3},setZoom:{minArgs:1,maxArgs:2},setZoomSettings:{minArgs:1,maxArgs:2},update:{minArgs:1,maxArgs:2}},topSites:{get:{minArgs:0,maxArgs:0}},webNavigation:{getAllFrames:{minArgs:1,maxArgs:1},getFrame:{minArgs:1,maxArgs:1}},webRequest:{handlerBehaviorChanged:{minArgs:0,maxArgs:0}},windows:{create:{minArgs:0,maxArgs:1},get:{minArgs:1,maxArgs:2},getAll:{minArgs:0,maxArgs:1},getCurrent:{minArgs:0,maxArgs:1},getLastFocused:{minArgs:0,maxArgs:1},remove:{minArgs:1,maxArgs:1},update:{minArgs:2,maxArgs:2}}};if(0===Object.keys(n).length)throw new Error("api-metadata.json has not been included in browser-polyfill");class s extends WeakMap{constructor(e,r){super(r),this.createItem=e}get(e){return this.has(e)||this.set(e,this.createItem(e)),super.get(e)}}const o=(r,t)=>(...n)=>{e.runtime.lastError?r.reject(e.runtime.lastError):t.singleCallbackArg||n.length<=1&&!1!==t.singleCallbackArg?r.resolve(n[0]):r.resolve(n)},i=e=>1==e?"argument":"arguments",a=(e,r,t)=>new Proxy(r,{apply:(r,n,s)=>t.call(n,e,...s)});let l=Function.call.bind(Object.prototype.hasOwnProperty);const c=(e,r={},t={})=>{let n=Object.create(null),s={has:(r,t)=>t in e||t in n,get(s,u,m){if(u in n)return n[u];if(!(u in e))return;let g=e[u];if("function"==typeof g)if("function"==typeof r[u])g=a(e,e[u],r[u]);else if(l(t,u)){let r=((e,r)=>function(t,...n){if(n.length<r.minArgs)throw new Error(`Expected at least ${r.minArgs} ${i(r.minArgs)} for ${e}(), got ${n.length}`);if(n.length>r.maxArgs)throw new Error(`Expected at most ${r.maxArgs} ${i(r.maxArgs)} for ${e}(), got ${n.length}`);return new Promise(((s,i)=>{if(r.fallbackToNoCallback)try{t[e](...n,o({resolve:s,reject:i},r))}catch(o){console.warn(`${e} API method doesn't seem to support the callback parameter, falling back to call it without a callback: `,o),t[e](...n),r.fallbackToNoCallback=!1,r.noCallback=!0,s()}else r.noCallback?(t[e](...n),s()):t[e](...n,o({resolve:s,reject:i},r))}))})(u,t[u]);g=a(e,e[u],r)}else g=g.bind(e);else if("object"==typeof g&&null!==g&&(l(r,u)||l(t,u)))g=c(g,r[u],t[u]);else{if(!l(t,"*"))return Object.defineProperty(n,u,{configurable:!0,enumerable:!0,get:()=>e[u],set(r){e[u]=r}}),g;g=c(g,r[u],t["*"])}return n[u]=g,g},set:(r,t,s,o)=>(t in n?n[t]=s:e[t]=s,!0),defineProperty:(e,r,t)=>Reflect.defineProperty(n,r,t),deleteProperty:(e,r)=>Reflect.deleteProperty(n,r)},u=Object.create(e);return new Proxy(u,s)},u=e=>({addListener(r,t,...n){r.addListener(e.get(t),...n)},hasListener:(r,t)=>r.hasListener(e.get(t)),removeListener(r,t){r.removeListener(e.get(t))}});let m=!1;const g=new s((e=>"function"!=typeof e?e:function(r,n,s){let o,i,a=!1,l=new Promise((e=>{o=function(r){m||(console.warn(t,(new Error).stack),m=!0),a=!0,e(r)}}));try{i=e(r,n,o)}catch(e){i=Promise.reject(e)}const c=!0!==i&&((u=i)&&"object"==typeof u&&"function"==typeof u.then);var u;if(!0!==i&&!c&&!a)return!1;return(c?i:l).then((e=>{s(e)}),(e=>{let r;r=e&&(e instanceof Error||"string"==typeof e.message)?e.message:"An unexpected error occurred",s({__mozWebExtensionPolyfillReject__:!0,message:r})})).catch((e=>{console.error("Failed to send onMessage rejected reply",e)})),!0})),d=({reject:t,resolve:n},s)=>{e.runtime.lastError?e.runtime.lastError.message===r?n():t(e.runtime.lastError):s&&s.__mozWebExtensionPolyfillReject__?t(new Error(s.message)):n(s)},A=(e,r,t,...n)=>{if(n.length<r.minArgs)throw new Error(`Expected at least ${r.minArgs} ${i(r.minArgs)} for ${e}(), got ${n.length}`);if(n.length>r.maxArgs)throw new Error(`Expected at most ${r.maxArgs} ${i(r.maxArgs)} for ${e}(), got ${n.length}`);return new Promise(((e,r)=>{const s=d.bind(null,{resolve:e,reject:r});n.push(s),t.sendMessage(...n)}))},f={runtime:{onMessage:u(g),onMessageExternal:u(g),sendMessage:A.bind(null,"sendMessage",{minArgs:1,maxArgs:3})},tabs:{sendMessage:A.bind(null,"sendMessage",{minArgs:2,maxArgs:3})}},v={clear:{minArgs:1,maxArgs:1},get:{minArgs:1,maxArgs:1},set:{minArgs:1,maxArgs:1}};return n.privacy={network:{"*":v},services:{"*":v},websites:{"*":v}},c(e,f,n)};if("object"!=typeof chrome||!chrome||!chrome.runtime||!chrome.runtime.id)throw new Error("This script should only be loaded in a browser extension.");e.exports=n(chrome)}else e.exports=browser})?t.apply(r,[e]):t)||(e.exports=n)}},r={};!function t(n){var s=r[n];if(void 0!==s)return s.exports;var o=r[n]={exports:{}};return e[n].call(o.exports,o,o.exports,t),o.exports}(217)})();